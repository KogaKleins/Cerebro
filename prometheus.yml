# ============================================
# üß† C√âREBRO - Configura√ß√£o Prometheus
# ============================================
# Arquivo de configura√ß√£o para coleta de m√©tricas
# do servidor C√©rebro.
#
# Para usar com Docker:
#   docker-compose -f docker-compose.observability.yml up -d
# ============================================

global:
  # Intervalo padr√£o de scraping
  scrape_interval: 15s
  
  # Timeout para scraping
  scrape_timeout: 10s
  
  # Intervalo de avalia√ß√£o de regras
  evaluation_interval: 15s

# ============================================
# CONFIGURA√á√ÉO DE SCRAPE
# ============================================
scrape_configs:
  # ----------------------------------------
  # M√©tricas do C√©rebro (Node.js/Express)
  # ----------------------------------------
  - job_name: 'cerebro'
    static_configs:
      # Para Docker no Windows/Mac, use host.docker.internal
      # Para Linux, use o IP da m√°quina host
      - targets: ['host.docker.internal:3000']
        labels:
          app: 'cerebro'
          environment: 'development'
    
    metrics_path: '/metrics'
    
    # Relabeling para adicionar informa√ß√µes
    relabel_configs:
      - source_labels: [__address__]
        target_label: instance
        replacement: 'cerebro-server'

  # ----------------------------------------
  # M√©tricas do pr√≥prio Prometheus
  # ----------------------------------------
  - job_name: 'prometheus'
    static_configs:
      - targets: ['localhost:9090']
        labels:
          app: 'prometheus'

# ============================================
# REGRAS DE ALERTA (opcional)
# ============================================
# rule_files:
#   - 'alerts/*.yml'

# ============================================
# ALERTMANAGER (opcional)
# ============================================
# alerting:
#   alertmanagers:
#     - static_configs:
#         - targets:
#           - 'alertmanager:9093'
